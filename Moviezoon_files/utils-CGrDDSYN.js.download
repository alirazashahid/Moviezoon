function _type_of(obj){"@swc/helpers - typeof";return obj&&typeof Symbol!=="undefined"&&obj.constructor===Symbol?"symbol":typeof obj}define(["jquery","OK/logger","OK/AjaxNavigationLog","OK/utils/screens"],function(j,J,L,G){var a={};"use strict";function O(e){return e&&e.__esModule?e:{default:e}}var S=O(j);var I=O(J);var E=document.getElementById("hook_Cfg_GwtExperimentsCfg");var T=E?OK.util.parseJSON(E.innerHTML):{};var C="data-";function g(e,n,i,t){var o=e.split(OK.navigation.SPLITER);o.forEach(function(r,u){if(i[u]){OK.hookModel.setHookContent(i[u],r,t)}})}function h(e,n,i,t){var o=window.performance.now();var r=S.default.ajax(e);t.xhr=r;t.fail(function(){r.abort()});r.done(function(u,l,f){L.default.log(window.performance.now()-o,e.url,f.getResponseHeader("X-Render-Time"));if(u&&f.responseText&&u.length===0&&f.responseText.length!==0&&f.responseText!="[]"){I.default.error("ajax",l);I.default.clob("ajax",JSON.stringify({"requestData":e,"response":f.responseText}))}var s=f.getResponseHeader("TKN");if(s){OK.tkn.set(s)}if(OK.state){OK.state.processXhrResponse(f)}var W=f.getResponseHeader("Redirect-Location");if(W){n(W);t.reject(f,l,"Redirect");return}var V=f.getResponseHeader(OK.CLIENT_FLAGS_HEADER);if(V!==null){OK.setClientFlags(V)}OK.util.processCssHeaders(f).then(function(){t.resolve(u,l,f)})});r.fail(function(u,l,f){if(i>0){if(l=="timeout"||!e.timeout){h(e,n,--i,t)}else{setTimeout(function(){h(e,n,--i,t)},e.timeout)}}else{t.reject(u,l,f)}});return t}function m(e,n,i){var t=i.getResponseHeader(OK.navigation.HEADER);if(t){return t.split(",")}return null}function K(e,n){if(typeof e==="string"){e=document.getElementById(e)}var i={};for(var t=0;t<e.attributes.length;t++){var o=e.attributes[t];if(o.name.indexOf(C)==0){i[o.name.substring(C.length)]=o.value}}if(n){e.parentNode.removeChild(e)}return i}function b(e,n){var i={};var t=Array.prototype.slice.call(e.elements);if(n){t=t.filter(n)}t.forEach(function(o){var r=o.name;if(r){switch(o.type){case"checkbox":i[r]=o.checked?"on":"off";break;case"radio":if(o.checked){i[r]=o.value}break;default:i[r]=o.value;break}}});return i}function R(e){var n=e?e.replace(/<!--/ig,"").replace(/-->/ig,""):null;return n?JSON.parse(n):null}function U(e){try{return e.getBoundingClientRect()}catch(n){return{top:0,right:0,bottom:0,left:0,width:0,height:0}}}var c=null;function A(e){c=e}function _(){if(c!=null){return c.top>=0?0:-c.top}return window.scrollY}function d(){if(c!=null){return{width:c.windowWidth,height:c.windowHeight}}return{width:window.innerWidth,height:window.innerHeight}}function p(e){var n=U(e);var i=c===null?0:c.left;var t=c===null?0:c.top;return{top:n.top+t,bottom:n.bottom+t,y:n.y+t,right:n.right+i,left:n.left+i,x:n.x+i,width:n.width,height:n.height,xShift:i,yShift:t}}function k(e,n,i){if(arguments.length>1){if(typeof arguments[1]!=="function"){i=n;n=void 0}}i=i||0;n=n||function(r){if(OK.navigation.redirect){OK.navigation.redirect(r)}else{document.location.href=decodeURIComponent(r)}};var t=e.data||{};var o=e.beforeSend;e.type=e.type||"POST";if(e.type==="POST"&&e.contentType&&e.contentType.indexOf("application/json")!=-1){if(typeof t!=="string"){t=JSON.stringify(t)}}else{t["gwt.requested"]=window.pageCtx.gwtHash}e.data=t;e.beforeSend=function(r,u){r.setRequestHeader("TKN",OK.tkn.get());r.setRequestHeader("STRD",OK.isStateRedesign());r.setRequestHeader("STRV",OK.getRedesignVersion());r.setRequestHeader(OK.CLIENT_FLAGS_HEADER,OK.getClientFlags());var l=OK.getStatId();if(l){r.setRequestHeader(OK.STAT_ID_HEADER,l)}G.default.apply(r);if(o){o.apply(this,arguments)}};return h(e,n,i,S.default.Deferred())}function P(e,n,i,t){var o=m(e,n,i);if(o){g(e,n,o,t)}}function F(e){return typeof e==="string"?e.replace(/<[^>]*>/g,""):e}function v(e){var n=p(e),i=d();if(n.top<0||n.left<0||n.bottom>i.height||n.right>i.width){return false}var t=(n.right+n.left)/2-n.xShift,o=(n.bottom+n.top)/2-n.yShift;return e.contains(document.elementFromPoint(t,n.top-n.yShift))||e.contains(document.elementFromPoint(n.right-n.xShift,o))||e.contains(document.elementFromPoint(t,n.bottom-n.yShift))||e.contains(document.elementFromPoint(n.left-n.xShift,o))}function w(e,n,i){if(!n){return v(e)}var t=p(e),o=d(),r=Math.min(t.bottom,o.height)-Math.max(0,t.top),u=Math.min(t.right,o.width)-Math.max(0,t.left),l=e.offsetHeight,f=e.offsetWidth;if(!l&&i!==void 0){if(i){return false}else{return null}}return l*n<=r&&f*n<=u}function B(e,n,i){var t=p(e);if(w(e,n,i)){var o=(t.right+t.left)/2-t.xShift,r=(t.bottom+t.top)/2-t.yShift;return e.contains(document.elementFromPoint(o,t.top-t.yShift))||e.contains(document.elementFromPoint(t.right-t.xShift,r))||e.contains(document.elementFromPoint(o,t.bottom-t.yShift))||e.contains(document.elementFromPoint(t.left-t.xShift,r))}return false}function y(e){e=e||{};for(var n=1;n<arguments.length;n++){var i=arguments[n];if(!i){continue}for(var t in i){if(i.hasOwnProperty(t)){if(_type_of(i[t])==="object"&&!Array.isArray(i[t])){e[t]=y(e[t],i[t])}else{e[t]=i[t]}}}}return e}function H(e){var n=u("=",(4-e.length%4)%4);var i=(e+n).replace(/\-/g,"+").replace(/_/g,"/");var t=window.atob(i);var o=new Uint8Array(t.length);for(var r=0;r<t.length;++r){o[r]=t.charCodeAt(r)}return o;function u(l,f){var s="";while(f-- >0){s+=l}return s}}function M(){var e,n;return{promise:new Promise(function(i,t){e=i;n=t}),resolve:e,reject:n}}function N(){return OK.util.nextId()||OK.util.nextId()}var x={ajax:k,getBlockIds:m,updateBlockModelCallback:P,updateBlocks:g,gwtExperimentsCfg:T,removeTags:F,isElementInViewport:v,isElementPartiallyInViewport:w,isElementPartiallyInViewportWithOverlapCheck:B,extendDeep:y,urlBase64ToUint8Array:H,deferred:M,getAttributesFromElement:K,getFormData:b,parseJson:R,positiveId:N,saveParentFrameDimensions:A,getScrollTop:_,getWindowInner:d};a.ajax=k;a.default=x;a.deferred=M;a.extendDeep=y;a.getAttributesFromElement=K;a.getBlockIds=m;a.getFormData=b;a.getScrollTop=_;a.getWindowInner=d;a.gwtExperimentsCfg=T;a.isElementInViewport=v;a.isElementPartiallyInViewport=w;a.isElementPartiallyInViewportWithOverlapCheck=B;a.parseJson=R;a.positiveId=N;a.removeTags=F;a.saveParentFrameDimensions=A;a.updateBlockModelCallback=P;a.updateBlocks=g;a.urlBase64ToUint8Array=H;Object.defineProperty(a,"__esModule",{value:true});return a});