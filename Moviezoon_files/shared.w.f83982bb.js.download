define(["exports","OK/pts!music.app"],(function(t,n){"use strict";var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},e(t,n)};t.__assign=function(){return t.__assign=Object.assign||function(t){for(var n,e=arguments,r=1,i=arguments.length;r<i;r++)for(var o in n=e[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},t.__assign.apply(this,arguments)},"function"==typeof SuppressedError&&SuppressedError;var r=["error.notloggedin","error.service.not.available","error.tuners.unavailable","error.play.track.unplayable","error.copyright.restriction","error.notfound","error.network","error.privacy.restricted","error.operation.not.permitted","illegal.invalidImage","error.playlists.size"];var i="0123456789abcdef".split("");function o(t){return function(t){for(var n=[],e=0;e<t.length;e++)n[e]=a(t[e]);return n.join("")}(function(t){var n,e=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=t.length;n+=64)c(r,u(t.substring(n-64,n)));t=t.substring(n-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<t.length;n++)i[n>>2]|=t.charCodeAt(n)<<(n%4<<3);if(i[n>>2]|=128<<(n%4<<3),n>55)for(c(r,i),n=0;n<16;n++)i[n]=0;return i[14]=8*e,c(r,i),r}(t))}function a(t){for(var n="",e=0;e<4;e++)n+=i[t>>8*e+4&15]+i[t>>8*e&15];return n}function c(t,n){var e=t[0],r=t[1],i=t[2],o=t[3];e=l(e,r,i,o,n[0],7,-680876936),o=l(o,e,r,i,n[1],12,-389564586),i=l(i,o,e,r,n[2],17,606105819),r=l(r,i,o,e,n[3],22,-1044525330),e=l(e,r,i,o,n[4],7,-176418897),o=l(o,e,r,i,n[5],12,1200080426),i=l(i,o,e,r,n[6],17,-1473231341),r=l(r,i,o,e,n[7],22,-45705983),e=l(e,r,i,o,n[8],7,1770035416),o=l(o,e,r,i,n[9],12,-1958414417),i=l(i,o,e,r,n[10],17,-42063),r=l(r,i,o,e,n[11],22,-1990404162),e=l(e,r,i,o,n[12],7,1804603682),o=l(o,e,r,i,n[13],12,-40341101),i=l(i,o,e,r,n[14],17,-1502002290),e=f(e,r=l(r,i,o,e,n[15],22,1236535329),i,o,n[1],5,-165796510),o=f(o,e,r,i,n[6],9,-1069501632),i=f(i,o,e,r,n[11],14,643717713),r=f(r,i,o,e,n[0],20,-373897302),e=f(e,r,i,o,n[5],5,-701558691),o=f(o,e,r,i,n[10],9,38016083),i=f(i,o,e,r,n[15],14,-660478335),r=f(r,i,o,e,n[4],20,-405537848),e=f(e,r,i,o,n[9],5,568446438),o=f(o,e,r,i,n[14],9,-1019803690),i=f(i,o,e,r,n[3],14,-187363961),r=f(r,i,o,e,n[8],20,1163531501),e=f(e,r,i,o,n[13],5,-1444681467),o=f(o,e,r,i,n[2],9,-51403784),i=f(i,o,e,r,n[7],14,1735328473),e=d(e,r=f(r,i,o,e,n[12],20,-1926607734),i,o,n[5],4,-378558),o=d(o,e,r,i,n[8],11,-2022574463),i=d(i,o,e,r,n[11],16,1839030562),r=d(r,i,o,e,n[14],23,-35309556),e=d(e,r,i,o,n[1],4,-1530992060),o=d(o,e,r,i,n[4],11,1272893353),i=d(i,o,e,r,n[7],16,-155497632),r=d(r,i,o,e,n[10],23,-1094730640),e=d(e,r,i,o,n[13],4,681279174),o=d(o,e,r,i,n[0],11,-358537222),i=d(i,o,e,r,n[3],16,-722521979),r=d(r,i,o,e,n[6],23,76029189),e=d(e,r,i,o,n[9],4,-640364487),o=d(o,e,r,i,n[12],11,-421815835),i=d(i,o,e,r,n[15],16,530742520),e=p(e,r=d(r,i,o,e,n[2],23,-995338651),i,o,n[0],6,-198630844),o=p(o,e,r,i,n[7],10,1126891415),i=p(i,o,e,r,n[14],15,-1416354905),r=p(r,i,o,e,n[5],21,-57434055),e=p(e,r,i,o,n[12],6,1700485571),o=p(o,e,r,i,n[3],10,-1894986606),i=p(i,o,e,r,n[10],15,-1051523),r=p(r,i,o,e,n[1],21,-2054922799),e=p(e,r,i,o,n[8],6,1873313359),o=p(o,e,r,i,n[15],10,-30611744),i=p(i,o,e,r,n[6],15,-1560198380),r=p(r,i,o,e,n[13],21,1309151649),e=p(e,r,i,o,n[4],6,-145523070),o=p(o,e,r,i,n[11],10,-1120210379),i=p(i,o,e,r,n[2],15,718787259),r=p(r,i,o,e,n[9],21,-343485551),t[0]=v(e,t[0]),t[1]=v(r,t[1]),t[2]=v(i,t[2]),t[3]=v(o,t[3])}function u(t){for(var n=[],e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function s(t,n,e,r,i,o){return n=v(v(n,t),v(r,o)),v(n<<i|n>>>32-i,e)}function l(t,n,e,r,i,o,a){return s(n&e|~n&r,t,n,i,o,a)}function f(t,n,e,r,i,o,a){return s(n&r|e&~r,t,n,i,o,a)}function d(t,n,e,r,i,o,a){return s(n^e^r,t,n,i,o,a)}function p(t,n,e,r,i,o,a){return s(e^(n|~r),t,n,i,o,a)}function v(t,n){return t+n&4294967295}var m=[4,3,5,6,1,2,8,7,2,9,3,5,7,1,4,8,8,3,4,3,1,7,3,5,9,8,1,4,3,7,2,8];function g(t){return!!t&&"source"in t}function h(t){return g(t)?t.name:t?"".concat(t.name," â€” ").concat(function(t){for(var n,e="",r=" feat. ",i=", ",o=0;o<(null===(n=t.artists)||void 0===n?void 0:n.length);o++)o===t.artistFeatIndex&&(e+=r),e+=t.artists[o].name,o<t.artists.length-1&&o+1!==t.artistFeatIndex&&(e+=i);return e}(t)):void 0}function y(t,n,e,r){var i=w(t,n,e,r);return-1!==i?n.items[i]:void 0}function b(t,n,e){if(void 0===t)return-1;var r,i,o=n.length,a=("number"==typeof t?t:(r=n,(i=t)?r.findIndex((function(t){return t.id===i.id&&t.regionId===i.regionId})):-1))+e;return a<0?a+o:a%o}function w(t,n,e,r){if(void 0===t)return-1;var i=n.items;if(-1===t)return x(i,1,-1);var o="number"==typeof t?t:k(i,t),a=x(i,r,o);switch(r){case 1:var c=x(i,1,-1);return"one"===e?o:-1!==a?a:"all"!==e||n.hasMore||-1===c?-1:c;case-1:var u=x(i,-1,i.length);return"one"===e?o:-1!==a?a:"all"!==e||n.hasMore||-1===u?o:u}}function k(t,n){return n?t.findIndex((function(t){return t.id===n.id})):-1}function x(t,n,e){var r="number"==typeof e?e:k(t,e);switch(n){case 1:for(var i=r+1;i<t.length;i++)if(!t[i].playRestricted)return i;break;case-1:for(i=r-1;i>=0;i--)if(!t[i].playRestricted)return i}return-1}var C,I,A={more:!0},D=function(){function t(t,n,e,r){void 0===e&&(e={}),this.items=t,this.loading=n,this.chunk=e,this.totalCount=r}return t.of=function(n,e,r){return void 0===e&&(e={}),new t(n,!1,e,r||e.more?r:n.length)},t.loading=function(){return I||(I=new t([],!0,A)),I},t.empty=function(n){return n?new t([],!1,A,n):(C||(C=new t([],!1,A)),C)},Object.defineProperty(t.prototype,"hasMore",{get:function(){return!!this.chunk.more},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNotEmpty",{get:function(){return!this.isEmpty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"from",{get:function(){var t=this.chunk,n=t.start,e=void 0===n?0:n,r=t.count;return e+(void 0===r?0:r)},enumerable:!1,configurable:!0}),t.prototype.setLoading=function(t){return this.create(this.items,t,this.chunk,this.totalCount)},t.prototype.setItems=function(t){return this.create(t,this.loading,this.chunk,this.totalCount)},t.prototype.setTotalCount=function(t){return this.create(this.items,this.loading,this.chunk,t)},t.prototype.add=function(t,n,e){return void 0===n&&(n={}),this.isSameChunk(n)?this:this.create(this.items.concat(t),!1,n,e||this.totalCount)},t.prototype.clone=function(){return this.setItems(this.items.slice())},t.prototype.create=function(n,e,r,i){return void 0===r&&(r={}),new t(n,e,r,i)},t.prototype.isSameChunk=function(t){var n=this.chunk,e=n.count,r=n.start,i=n.more;return t.count===e&&t.start===r&&t.more===i},t}();function O(t){return t?t.reduce((function(t,n){return t[n.id]=n,t}),{}):{}}function L(t,n){return Array.isArray(n)?T(t,O(n)[t.albumId]):T(t,n)}function T(t,n){return{id:t.id,name:t.name,ensemble:t.ensemble,artists:P(t),artistsStr:S(t),artistFeatIndex:t.artistFeatIndex,album:{id:t.albumId,name:n?n.name:"",image:n&&n.image?n.image:t.imageUrl},cover:t.imageUrl,duration:t.duration,giftPrice:t.giftPrice,musicVideoId:t.musicVideoId,copyrightOwnerName:t.copyrightOwnerName,isDownloadAllowed:t.isDownloadAllowed,idForDownload:t.idForDownload,editRestricted:t.editRestricted,playRestricted:t.playRestricted,blocked:t.playRestricted&&!t.subscription,subscription:t.subscription,similarityWeight:t.similarityWeight,releaseId:t.releaseId,new:t.new,copyrightDbg:t.copyrightDbg,ctx:t.ctx,explicit:1===t.explicit,text:t.text,timestamps:t.timestamps}}function P(t){return 0===t.allArtists.length&&t.ensemble.trim()?[{id:t.masterArtistId,name:t.ensemble}]:t.allArtists.filter((function(t){return!!t.name.trim()}))}function S(t){if(0===t.allArtists.length)return t.ensemble.trim()?t.ensemble:null;for(var n="",e=0;e<t.allArtists.length;e++)e===t.artistFeatIndex?n+=" feat. ":e>0&&(n+=", "),n+=t.allArtists[e].name;return n}var M=[["%20","+"],["%2F","%252F"],["%5C","%255C"]];function R(t){var n=encodeURIComponent(t);return M.forEach((function(t){var e,r,i;e=n,r=t[0],i=t[1],n=e.split(r).join(i)})),n}function _(t,n){return n?"/music/"+n:"/music"}function F(t,n,e){return e.id>0?_(0,"".concat(n,"/").concat(e.id)):_(0,"search/tracks/".concat(e.name))}function E(t,e,r){return n.getLMsg(e,r)}function j(t,n){return String(n).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function U(t){return t<10?"0".concat(t):t.toString()}var B;function H(t,n){t.root.setState({toast:n})}var N="clipboard-textarea";function Y(t,n,e){void 0===e&&(e={});var r=null,i=0,o=function(){for(var n=arguments,o=[],a=0;a<arguments.length;a++)o[a]=n[a];i=!1===e.leading?0:Date.now(),r=null,t.apply(void 0,o)};return function(){for(var a=arguments,c=[],u=0;u<arguments.length;u++)c[u]=a[u];var s=Date.now();i||!1!==e.leading||(i=s);var l=n-(s-i);l<=0||l>n?(r&&(clearTimeout(r),r=null),i=s,t.apply(void 0,c)):r||!1===e.trailing||(r=setTimeout((function(){return o.apply(void 0,c)}),l))}}var W=function(){},q=function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",W,n),window.removeEventListener("test",W,n)}catch(n){t=!1}return!!t&&{passive:!0}}();function z(t,n,e){void 0===n&&(n=!1),void 0===e&&(e=!1),n&&(t=Y(t,300));return K((function(t){return V(t,e)}),"scroll",t,q)}function V(t,n){return n?t.root.refs.nav:t.root.refs.content}function G(t,n){return void 0===n&&(n=!1),n&&(t=Y(t,300)),K(window,"resize",t)}function K(t,n,e,r){var i;return void 0===r&&(r=!1),{willMount:function(o){i=function(t){return e(o,t)},Q(t,o).addEventListener(n,i,r)},willUnmount:function(e){i&&(Q(t,e).removeEventListener(n,i,r),i=null)}}}function Q(t,n){return"function"==typeof t?t(n):t}function X(t,n,e){var r=t.canLoad,i=t.getContainer,o=t.load;return function(t){if(!r||r(t)){var a=e||V(t,n),c=a.getBoundingClientRect(),u=(i&&i(t)||t).getBoundingClientRect();u.height>0&&u.bottom<c.bottom+a.offsetHeight/2&&o(t)}}}var J=function(){};var Z=window.matchMedia("(max-width: 1278px)");t.CLIPBOARD_TEXTAREA_ID=N,t.ChunkedList=D,t.Env={isMobileApp:!1,musicThemeRootClass:"js-music-theme-root"},t.__decorate=function(t,n,e,r){var i,o=arguments.length,a=o<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,e,r);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(o<3?i(a):o>3?i(n,e,a):i(n,e))||a);return o>3&&a&&Object.defineProperty(n,e,a),a},t.__extends=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},t.__spreadArray=function(t,n,e){if(e||2===arguments.length)for(var r,i=0,o=n.length;i<o;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return t.concat(r||Array.prototype.slice.call(n))},t.addWideScreenListener=function(t){var n;return{willMount:function(e){n=function(){return t(e)},Z.addListener(n)},willUnmount:function(){n&&(Z.removeListener(n),n=null)}}},t.animate=function(t){var n=performance.now(),e=!0,r=function(){e=!1,t.after=J};requestAnimationFrame((function i(o){var a,c=(o-n)/t.duration;if(c>1&&e)return t.tick(1,r),void requestAnimationFrame(null!==(a=t.after)&&void 0!==a?a:J);var u=(t.withoutEasing,c);t.tick(u,r),c<1&&e&&requestAnimationFrame(i)}))},t.artistsMatches=function(t,n,e){if(n.length!==e.length)return!1;for(var r=0;r<n.length;r++)if(n[r].id!==e[r].id)return!1;return!0},t.buildAlbumLink=function(t,n){return"object"==typeof n?F(t,"album",n):_(0,"album/".concat(n))},t.buildArtistLink=function(t,n,e){return F(t,"artist","object"==typeof n?n:{id:n,name:e})},t.buildCollectionLink=function(t,n){return _(0,"collection/"+n)},t.buildCollectionsLink=function(t,n){return _(0,"collections/"+n)},t.buildGroupLink=function(t,n){return _(0,"group/".concat(n))},t.buildPageLink=_,t.buildPlaylistLink=function(t,n){return _(0,"playlist/"+n)},t.buildProfileLink=function(t,n){return _(0,"profile/".concat(n))},t.buildPromoLink=function(t,n,e,r){return"/music/".concat(n,"/").concat(e,"?ctx=").concat(r)},t.buildRefLink=function(t,n){var e=n.split(":"),r=e[0],i=e[1];return"/music/".concat("user"===r?"profile":r,"/").concat(i)},t.buildSearchTrackLink=function(t,n){return _(0,"search/tracks/".concat(R("".concat(n.artists[0].name," ").concat(n.name))))},t.buildTrackLink=function(t,n){return _(0,"track/"+n)},t.cacheable=function(t,n,e){var r=e.value,i={};return e.value=function(){var t=arguments[0];return i[t]||(i[t]=r.apply(this,arguments)),i[t]},e},t.convertHistoryTracks=function(t,n,e){for(var r=[],i=O(e),o=O(n),a=0,c=t;a<c.length;a++){var u=c[a],s=o[u.id];s&&r.push({track:L(s,i[s.albumId]),added:u.added})}return r},t.convertTrack=L,t.convertTracks=function(t,n){return function(t,n){return t.map((function(t){return L(t,n[t.albumId])}))}(t,!n||Array.isArray(n)?O(n):n)},t.convertTracksFromAlbum=function(t,n){return t.map((function(t){return L(t,n)}))},t.copy=function(t){if(window.clipboardData&&window.clipboardData.setData)window.clipboardData.setData("Text",t);else if(navigator.clipboard)navigator.clipboard.writeText(t);else{var n=document.createElement("textarea");n.setAttribute("style","width:1px;border:0;opacity:0;"),n.id=N,document.body.appendChild(n),n.value=t,n.select(),document.execCommand("copy"),document.body.removeChild(n)}},t.createBoundsCheckerWeb=X,t.createDataTable=O,t.encodeQuery=R,t.formatCounter=j,t.formatDate=function(t,n,e){void 0===e&&(e=!0);var r=new Date,i=new Date(n);return function(t,n){return n.getFullYear()===t.getFullYear()&&n.getMonth()===t.getMonth()&&n.getDate()===t.getDate()}(r,i)?E(0,"today"):function(t,n){var e=new Date((new Date).setDate(t.getDate()-1));return n.getFullYear()===e.getFullYear()&&n.getMonth()===e.getMonth()&&n.getDate()===e.getDate()}(r,i)?E(0,"yesterday"):function(t,n,e,r){var i=E(0,"month-format",{day:e.getDate(),month:e.getMonth()});r&&e.getFullYear()!==n.getFullYear()&&(i+=" "+e.getFullYear());return i}(0,r,i,e)},t.formatDuration=function(t,n){n<0&&(n=0);var e=new Date(1e3*n),r=e.getUTCHours(),i=e.getUTCMinutes(),o=e.getSeconds();return r?"".concat(U(r),":").concat(U(i),":").concat(U(o)):"".concat(U(i),":").concat(U(o))},t.getIndexOfNextOrPrevStation=b,t.getIndexOfNextOrPrevTrack=w,t.getIndexOfNextOrPrevUnrestricted=x,t.getNextTrackHintIfChanged=function(t,n,e,r,i){var o=g(t)?function(t,n){var e=b(t,n,1);return n[e]}(t,e):function(t,n,e){return y(t,n,e,1)}(t,n,r),a=o!==i;return{isChanged:a,trackHint:a?h(o):void 0,track:o}},t.getPrevTrackHintIfChanged=function(t,n,e,r,i){var o=g(t)?function(t,n){var e=b(t,n,-1);return n[e]}(t,e):function(t,n,e){return y(t,n,e,-1)}(t,n,r),a=o!==i;return{isChanged:a,trackHint:a?h(o):void 0,track:o}},t.hasPrevTrack=function(t,n,e,r,i){return!!t&&(!!g(t)||(-1!==x(n.items,-1,t)||i>10||"all"===r&&!n.hasMore))},t.isASignificantError=function(t){return!r.includes(t.message)},t.isActive=function(t,n,e,r){var i=t.store.data.player,o=i.queue,a=i.track,c=i.radioStation;if(r)return n===(null==a?void 0:a.id)&&r===(null==a?void 0:a.ctx);var u=o.id,s=o.type;return!c&&(String(n)===u&&s===e||27===e&&(null==a?void 0:a.id)===n)},t.isFocusCausedInside=function(t,n){var e=n.relatedTarget;return!(!e||e.closest(t.tagName.toLowerCase())!==t)},t.isWideScreen=function(){return!Z.matches},t.l10n=E,t.observable=function(t){var n;return{willMount:function(e){"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?(n||(n=new IntersectionObserver((function(n){return n.forEach((function(n){return t(n.target,n.isIntersecting)}))}),{root:e.root.refs.content})),n.observe(e),t(e,!0)):t(e,!0)},willUnmount:function(t){n&&n.unobserve(t)}}},t.on=function(t,n,e,r){return K(t,n,e,r)},t.onPagingWeb=function(t,n){void 0===n&&(n=!1);var e=X(t,n);return{plugins:[z(e,!0,n),G(e,!0)]}},t.onResize=G,t.onScroll=z,t.padStart=function(t,n,e){return"function"==typeof String.prototype.padStart?t.padStart(n,e):function(t,n,e){var r=Math.floor(n)||0;if(r<t.length)return String(t);var i=e?String(e):" ",o="",a=r-t.length,c=0;for(;o.length<a;)i[c]||(c=0),o+=i[c],c++;return o+String(t).slice(0)}(t,n,e)},t.ratio=function(){var t=!1;return window.matchMedia&&(t=window.matchMedia("only screen and (min-resolution: 124dpi),only screen and (min-resolution: 1.3dppx),only screen and (min-resolution: 48.8dpcm)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3),only screen and (-o-min-device-pixel-ratio: 2.6/2),only screen and (min--moz-device-pixel-ratio: 1.3),only screen and (min-device-pixel-ratio: 1.3)").matches),!t&&window.devicePixelRatio&&(t=window.devicePixelRatio>1.3),t?2:1},t.round=function(t,n){return Math.round(n)},t.setFocusToMoreButton=function(){return{didRender:function(t){var n,e=t.props,r=t.refs,i=t.state,o=t.setState;e.moreBtn&&!i.once&&(null===(n=r.fromMoreBtn)||void 0===n||n.focus(),o({once:!0}))}}},t.showToast=function(t,n){H(t,n),clearTimeout(B),B=setTimeout((function(){return H(t)}),5e3)},t.signURL=function(t){for(var n,e=o(/md5=(\w*)/g.exec(t)[1]+"secret"),r=e.length,i="",a=0,c=0;c<r;c++)a+=parseInt(e[c],16);for(c=0;c<r;c++){var u=parseInt(e[c],16);n=c===r-1?u:parseInt(e[c+1],16),i+=Math.abs(a-u*n*m[c])}return"".concat(t,"&client=web&clientHash=").concat(i)},t.throttle=Y,t.tracksCountLabel=function(t,n){return E(0,"tracks_count",{count:j(0,n||0),countPlural:n})}}));
//# sourceMappingURL=shared.w.f83982bb.js.map
